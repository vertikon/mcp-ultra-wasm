# ===================================
# MCP Ultra - Environment Variables
# ===================================
# NUNCA commitar arquivo .env com valores reais!
# Copie este arquivo para .env e preencha com valores reais

# ===================================
# SECRETS BACKEND
# ===================================
SECRETS_BACKEND=env # Opções: env, vault, k8s

# Se usar Vault
VAULT_ADDR=https://vault.exemplo.com.br
VAULT_TOKEN=
VAULT_PATH=secret/mcp-ultra-wasm

# ===================================
# DATABASE (PostgreSQL)
# ===================================
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=mcp_ultra_wasm_user
DB_PASSWORD= # OBRIGATÓRIO - Gerar senha forte
DB_NAME=mcp_ultra_wasm
DB_SSL_MODE=require

# Connection Pool
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m

# ===================================
# NATS
# ===================================
NATS_URL=nats://localhost:4222
NATS_USERNAME=mcp_ultra_wasm
NATS_PASSWORD= # OBRIGATÓRIO se não usar token
NATS_TOKEN= # Alternativa ao username/password

# Cluster (produção)
NATS_CLUSTER_URLS=nats://nats1:4222,nats://nats2:4222,nats://nats3:4222

# ===================================
# TELEMETRIA
# ===================================
# OpenTelemetry
OTLP_ENDPOINT=localhost:4317
OTLP_AUTH_TOKEN= # Opcional
OTLP_SERVICE_NAME=mcp-ultra-wasm
OTLP_SERVICE_VERSION=1.0.0
OTLP_ENVIRONMENT=development

# Prometheus
PROMETHEUS_USERNAME=prometheus
PROMETHEUS_PASSWORD= # Opcional em dev

# ===================================
# AUTENTICAÇÃO & SEGURANÇA
# ===================================
# JWT (OBRIGATÓRIO)
JWT_SECRET= # Gerar: openssl rand -base64 64
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d

# API Keys (formato JSON array)
API_KEYS='["key1-aqui","key2-aqui"]'

# Encryption Master Key (OBRIGATÓRIO)
ENCRYPTION_MASTER_KEY= # Gerar: openssl rand -base64 32
ENCRYPTION_KEY_ROTATION_DAYS=90

# ===================================
# SERVIDOR
# ===================================
SERVER_PORT=8080
SERVER_HOST=0.0.0.0
SERVER_READ_TIMEOUT=30s
SERVER_WRITE_TIMEOUT=30s
SERVER_IDLE_TIMEOUT=120s

# GRPC
GRPC_PORT=9090
GRPC_MAX_RECV_MSG_SIZE=4194304 # 4MB
GRPC_MAX_SEND_MSG_SIZE=4194304 # 4MB

# ===================================
# FEATURES FLAGS
# ===================================
FEATURE_GRPC_ENABLED=true
FEATURE_METRICS_ENABLED=true
FEATURE_TRACING_ENABLED=true
FEATURE_PROFILING_ENABLED=false # Apenas em dev

# ===================================
# RATE LIMITING
# ===================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m

# ===================================
# CIRCUIT BREAKER
# ===================================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=30s

# ===================================
# LOGGING
# ===================================
LOG_LEVEL=info # debug, info, warn, error
LOG_FORMAT=json # json, text
LOG_OUTPUT=stdout # stdout, stderr, file

# ===================================
# DEVELOPMENT
# ===================================
DEV_MODE=false
DEV_HOT_RELOAD=false
DEV_DEBUG_SQL=false

# ===================================
# COMPLIANCE & AUDIT
# ===================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_PATH=/var/log/mcp-ultra-wasm/audit.log
COMPLIANCE_MODE=strict # strict, standard, permissive

# Audit Encryption Key (OBRIGATÓRIO se audit encryption estiver habilitado)
AUDIT_ENCRYPTION_KEY= # Gerar: openssl rand -base64 32

# ===================================
# TESTING (Para testes de integração)
# ===================================
# Credenciais do banco de teste (não usar em produção)
TEST_DB_USER=testuser
TEST_DB_PASSWORD=test_secure_password
TEST_DB_NAME=test_mcp_ultra_wasm

# ===================================
# GERAÇÃO DE SECRETS
# ===================================
# Use os comandos abaixo para gerar secrets seguros:
#
# JWT Secret:
#   openssl rand -base64 64
#
# Encryption Key:
#   openssl rand -base64 32
#
# Password (PostgreSQL/NATS):
#   openssl rand -base64 24
#
# NATS Token:
#   openssl rand -hex 32
#
# API Key:
#   uuidgen | tr '[:upper:]' '[:lower:]'
